(this.webpackJsonptyper=this.webpackJsonptyper||[]).push([[0],{14:function(e,t,n){},15:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n.n(o),r=n(5),l=n.n(r),s=(n(14),n(6)),i=n(7),a=n(9),u=n(8),d=n(2),f=(n(15),n(4)),h=n.n(f),p=n(0),C=c.a.forwardRef((function(e,t){var n=e.selected,o=e.letter,c=e.isScroller,r=h()("noselect","letters-cell",{"letters-cell-selected":n,"letters-cell-scroller":c});return c?Object(p.jsx)("div",{className:r}):Object(p.jsx)("div",{className:r,ref:t,children:o})}));function j(e){var t=e.kind,n=e.onClick,o=e.letter;return Object(p.jsx)("div",{className:"noselect control-button control-button-".concat(t),children:Object(p.jsx)("button",{className:"noselect control-button-inner",onClick:n,children:o})})}function v(e){var t=e.letters,n=e.selectedCol,c=e.selectedRow,r=e.mode,l=e.onSelectRow,s=e.onSelectRowAndCol,i=Object(o.useRef)([]),a=Object(o.useRef)([]),u=t.length,f=t[0].length;function h(e,t){var n=function(e){for(var t=0;t<i.current.length;t++){var n=i.current[t].current,o=n.offsetHeight,c=n.offsetTop+o,r=n.offsetTop+n.offsetHeight+o;if(c<=e.clientY&&e.clientY<=r)return t}return null}(e),o=function(e){for(var t=0;t<a.current.length;t++){var n=a.current[t].current,o=n.offsetLeft,c=n.offsetLeft+n.offsetWidth;if(o<=e.clientX&&e.clientX<=c)return t}return null}(e);null!=o&&null!=n?s(n,o,t):null!=n&&l(n)}i.current=Object(d.a)(Array(u).keys()).map((function(e,t){var n;return null!==(n=i.current[t])&&void 0!==n?n:Object(o.createRef)()})),a.current=Object(d.a)(Array(f).keys()).map((function(e,t){var n;return null!==(n=a.current[t])&&void 0!==n?n:Object(o.createRef)()}));var j="=",v=t.map((function(e,t){return[j].concat(Object(d.a)(e))}));v.push([j].concat(Object(d.a)(Object(d.a)(Array(f).keys()).map((function(){return"&"})))));var b=v.map((function(e,t){return Object(p.jsx)("div",{className:"letters-row",ref:i.current[t],children:e.map((function(e,o){var l=e===j,s="&"===e,i=n===o-1,u=l?c===t-1:c===t,d=!1;return d=r===k.SELECTING_ROW?u:u&&i,Object(p.jsx)(C,{selected:d,isScroller:l||s,letter:e,ref:0===t&&o>0?a.current[o-1]:null},o.toString())}))},t.toString())}));return Object(p.jsx)("div",{className:"letters-container",onTouchStart:function(e){h(e.changedTouches[0])},onTouchMove:function(e){h(e.changedTouches[0])},onTouchEnd:function(e){h(e.changedTouches[0],!0)},children:b})}function b(e){var t=e.onLeft,n=e.onRight,o=e.onUp,c=e.onDown,r=e.onCenter,l=e.onBackspace;return Object(p.jsxs)("div",{className:"controller",children:[Object(p.jsx)(j,{kind:"left",letter:"\u2b05\ufe0f",onClick:t}),Object(p.jsx)(j,{kind:"right",letter:"\u27a1\ufe0f",onClick:n}),Object(p.jsx)(j,{kind:"up",letter:"\u2b06\ufe0f",onClick:o}),Object(p.jsx)(j,{kind:"down",letter:"\u2b07\ufe0f",onClick:c}),Object(p.jsx)(j,{kind:"center",letter:"\ud83d\udfe2",onClick:r}),Object(p.jsx)(j,{kind:"backspace",letter:"\u23ee",onClick:l})]})}var m=["\u0410\u0411\u0412\u0413\u0414".split(""),"\u0415\u0401\u0416\u0417\u0418".split(""),"\u0419\u041a\u041b\u041c\u041d".split(""),"\u041e\u041f\u0420\u0421\u0422".split(""),"\u0423\u0424\u0425\u0426\u0427".split(""),"\u0428\u0429\u042a\u042b\u042c".split(""),"\u042d\u042e\u042f.,".split("")];function O(e){var t=e.text,n=0===(null!==t&&void 0!==t?t:"").length,o=h()("noselect","display-text",{"display-text-placeholder":n});return Object(p.jsx)("div",{className:o,children:n?"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0435\u0442 \u0442\u0435\u043a\u0441\u0442":t})}var k={SELECTING_ROW:"SELECTING_ROW",SELECTING_COL:"SELECTING_COL"},w=function(e){Object(a.a)(n,e);var t=Object(u.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).onKeyDown=function(e){switch(e.code){case"ArrowLeft":o.onLeft();break;case"ArrowUp":o.onUp();break;case"ArrowDown":o.onDown();break;case"ArrowRight":o.onRight();break;case"Enter":o.action();break;case"Backspace":o.backspace();break;default:console.log('Handling key code="'.concat(e.code,'"'))}},o.onSelectRow=function(e){o.setState((function(t){var n=t.letters.length-1,o=Math.min(Math.max(0,e),n);return{mode:k.SELECTING_ROW,selectedCol:t.selectedCol,selectedRow:o}}))},o.onSelectRowAndCol=function(e,t,n){o.setState((function(o){var c=o.letters.length-1,r=o.letters[o.selectedRow].length-1,l=Math.min(Math.max(0,t),r),s=Math.min(Math.max(0,e),c);if(n){var i=o.letters[o.selectedRow][o.selectedCol];return{mode:k.SELECTING_ROW,selectedCol:l,selectedRow:s,inputText:o.inputText+i}}return{mode:k.SELECTING_COL,selectedCol:l,selectedRow:s}}))},o.onLeft=function(){o.moveDelta(-1,0)},o.onRight=function(){o.moveDelta(1,0)},o.onUp=function(){o.moveDelta(0,-1)},o.onDown=function(){o.moveDelta(0,1)},o.onCenter=function(){o.action()},o.onBackspace=function(){o.backspace()},o.state={letters:m,selectedRow:0,selectedCol:0,inputText:"",mode:k.SELECTING_ROW},o}return Object(i.a)(n,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.onKeyDown)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.onKeyDown)}},{key:"action",value:function(){this.setState((function(e){var t={mode:e.mode===k.SELECTING_ROW?k.SELECTING_COL:k.SELECTING_ROW};if(e.mode===k.SELECTING_COL){var n=e.letters[e.selectedRow][e.selectedCol];t.inputText=e.inputText+n,t.selectedCol=0,t.selectedRow=0}return t}))}},{key:"finishWord",value:function(){this.setState((function(e){return{inputText:e.inputText.length>0?e.inputText+" ":"",selectedCol:0,selectedRow:0}}))}},{key:"backspace",value:function(){this.setState((function(e){return{inputText:e.inputText.length>0?e.inputText.substring(0,e.inputText.length-1):""}}))}},{key:"moveDelta",value:function(e,t){this.setState((function(n,o){if(n.mode===k.SELECTING_COL&&0!==t)return{mode:k.SELECTING_ROW,selectedCol:0};n.mode===k.SELECTING_COL?t=0:e=0;var c=n.letters.length-1,r=n.letters[n.selectedRow].length-1;return{selectedCol:Math.min(Math.max(0,n.selectedCol+e),r),selectedRow:Math.min(Math.max(0,n.selectedRow+t),c)}}))}},{key:"render",value:function(){return Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(O,{text:this.state.inputText}),Object(p.jsx)(v,{letters:this.state.letters,selectedCol:this.state.selectedCol,selectedRow:this.state.selectedRow,mode:this.state.mode,onSelectRow:this.onSelectRow,onSelectRowAndCol:this.onSelectRowAndCol}),Object(p.jsx)(b,{onLeft:this.onLeft,onRight:this.onRight,onCenter:this.onCenter,onUp:this.onUp,onDown:this.onDown,onBackspace:this.onBackspace})]})}}]),n}(c.a.Component),x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,18)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),o(e),c(e),r(e),l(e)}))};l.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(w,{})}),document.getElementById("root")),x()}},[[17,1,2]]]);
//# sourceMappingURL=main.d5f28196.chunk.js.map